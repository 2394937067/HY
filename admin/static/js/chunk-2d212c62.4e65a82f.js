(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d212c62"],{aa9e:function(t,e,r){"use strict";r.r(e);var l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"products"},[r("div",[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.toAddHandler}},[t._v("添加")]),t._v(" "),r("el-button",{attrs:{size:"small",type:"danger"},on:{click:t.batchDeleteHandler}},[t._v("批量删除")])],1),t._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[r("el-table",{attrs:{data:t.products,size:"mini"},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),r("el-table-column",{attrs:{prop:"id",label:"编号"}}),t._v(" "),r("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),r("el-table-column",{attrs:{prop:"price",label:"价格"}}),t._v(" "),r("el-table-column",{attrs:{prop:"idname",label:"栏目编号"}}),t._v(" "),r("el-table-column",{attrs:{prop:"status",label:"状态"}}),t._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return t.deleteHandler(e.row.id)}}}),t._v(" "),r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline",circle:""},on:{click:function(r){return t.editHandler(e.row)}}}),t._v(" "),r("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-view",circle:""},on:{click:function(r){return t.toDetailsHandler(e.row)}}})]}}])})],1)],1),t._v(" "),r("el-dialog",{attrs:{title:t.title,visible:t.visible},on:{"update:visible":function(e){t.visible=e},close:t.dialogCloseHandler}},[r("el-form",{ref:"productForm",attrs:{model:t.product,rules:t.rules}},[r("el-form-item",{attrs:{label:"名称","label-width":"100px",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"价格","label-width":"100px",prop:"price"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"描述","label-width":"100px",prop:"description"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"所属栏目","label-width":"100px",prop:"categoryId"}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.product.categoryId,callback:function(e){t.$set(t.product,"categoryId",e)},expression:"product.categoryId"}},t._l(t.category,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"状态","label-width":"100px",prop:"status"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.product.status,callback:function(e){t.$set(t.product,"status",e)},expression:"product.status"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"产品主图","label-width":"100px",prop:"photo"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:"http://134.175.154.93:6677/file/upload","file-list":t.fileList,"on-success":t.uploadSuccessHandler,limit:1,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:t.closeModal}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitHandler}},[t._v("确 定")])],1)],1)],1)},o=[],i=(r("efce"),r("4634"),r("ed8b"),r("f498")),s=r("52c1");r("012b");function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,l)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(r,!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var n={data:function(){return{fileList:[],product:{},ids:null,rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],categoryId:[{required:!0,message:"请选择服务种类",trigger:"blur"}]}}},computed:c({},Object(s["e"])("product",["products","visible","title","loading","category"]),{},Object(s["c"])("product",["productSize","orderProduct"])),created:function(){this.findAllProducts(),this.findCategory()},methods:c({},Object(s["d"])("product",["showModal","closeModal","setTitle","findCategoryName","idFindName"]),{},Object(s["b"])("product",["findAllProducts","saveOrUpdateProduct","deleteProductById","batchDeleteProduct","findCategory"]),{toDetailsHandler:function(t){this.$router.push({path:"/product/detailsProduct",query:{id:t.id}})},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.id}))},toAddHandler:function(){this.product={},this.setTitle("添加产品信息"),this.showModal()},submitHandler:function(){var t=this;this.$refs.productForm.validate((function(e){if(!e)return!1;t.saveOrUpdateProduct(t.product).then((function(e){t.$message({type:"success",message:e.statusText})})),t.closeModal()}))},dialogCloseHandler:function(){this.$refs.productForm.resetFields(),this.closeModal()},editHandler:function(t){this.fileList.push({url:t.photo}),this.product=t,this.setTitle("修改产品信息"),this.showModal()},deleteHandler:function(t){var e=this;this.deleteProductById(t).then((function(t){e.$message({type:"success",message:t.statusText})}))},batchDeleteHandler:function(){var t=this;this.batchDeleteProduct(this.ids).then((function(e){t.$message({type:"success",message:e.statusText})}))},uploadSuccessHandler:function(t){if(200===t.status){var e=t.data.id,r="http://134.175.154.93:8888/group1/"+e;this.product.photo=r,this.product=Object.assing({},this.product)}else this.$message.error("上传异常")}})},d=n,u=r("4e82"),p=Object(u["a"])(d,l,o,!1,null,"61d8984e",null);e["default"]=p.exports}}]);